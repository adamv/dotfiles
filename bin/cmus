#!/bin/bash

# kill the media key program on exit
trap 'kill $(jobs -p)' EXIT

# prevent iTunes from capturing media keys
launchctl unload -w /System/Library/LaunchAgents/com.apple.rcd.plist >/dev/null 2>&1

# launch the media key program in the background
(cmus-media-keys) &

# pipe CoreAudio messages to null:
# https://github.com/cmus/cmus/issues/421
$(brew --prefix cmus)/bin/cmus "$@" 2>/dev/null
